<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiAppPrevisao.Views.Historico"
             Title="HistÃ³rico de Consultas"
             BackgroundColor="#F0F8FF">

    <VerticalStackLayout Padding="25" Spacing="20">

        <Label 
            Text="HistÃ³rico de Consultas"
            FontSize="28"
            HorizontalOptions="Center" 
            FontAttributes="Bold"
            TextColor="#1976D2"
            Margin="0, 10, 0, 10"/>

        <Border BackgroundColor="White" Padding="20" StrokeShape="RoundRectangle 12" StrokeThickness="1" Stroke="#E0E0E0">
            <VerticalStackLayout Spacing="15">
                <Label Text="ðŸ“… Filtrar por Intervalo de Datas" FontSize="20" FontAttributes="Bold" TextColor="#3F51B5"/>

                <Grid ColumnDefinitions="*, Auto" ColumnSpacing="10">

                    <VerticalStackLayout Grid.Column="0" Spacing="5">
                        <Label Text="Data Inicial:" TextColor="#333" FontSize="14"/>
                        <DatePicker x:Name="StartDatePicker" Format="dd/MM/yyyy" HorizontalOptions="FillAndExpand"/>
                    </VerticalStackLayout>

                    <VerticalStackLayout Grid.Column="1" Spacing="5">
                        <Label Text="Data Final:" TextColor="#333" FontSize="14"/>
                        <DatePicker x:Name="EndDatePicker" Format="dd/MM/yyyy" HorizontalOptions="FillAndExpand"/>
                    </VerticalStackLayout>
                </Grid>

                <Button Text="Aplicar Filtro" 
                        Clicked="OnFilterClicked" 
                        BackgroundColor="#7986CB" 
                        TextColor="White" 
                        CornerRadius="8"
                        FontAttributes="Bold"
                        Margin="0, 10, 0, 0"/>
            </VerticalStackLayout>
        </Border>

        <Label Text="Consultas Registradas:" FontSize="18" FontAttributes="Bold" TextColor="#333" Margin="0, 10, 0, 0"/>

        <ListView x:Name="HistoryListView" HasUnevenRows="True" SelectionMode="None" VerticalOptions="FillAndExpand">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <ViewCell>
                        <Border Margin="0, 5" Padding="15" StrokeShape="RoundRectangle 8" BackgroundColor="#E3F2FD" StrokeThickness="0">
                            <VerticalStackLayout Spacing="5">
                                <Label Text="{Binding Cidade}" FontSize="20" FontAttributes="Bold" TextColor="#0277BD" />
                                <Label Text="{Binding DataConsulta, StringFormat='Realizada em: {0:dd/MM/yyyy HH:mm}'}" 
                                       FontSize="14" TextColor="#546E7A" />
                                <BoxView HeightRequest="1" BackgroundColor="#B0BEC5" Margin="0, 5, 0, 0"/>
                                <Label Text="{Binding PrevisaoDetalhes}" 
                                       FontSize="16" FontAttributes="Italic" TextColor="#37474F" />
                            </VerticalStackLayout>
                        </Border>
                    </ViewCell>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        
        <Button Text="Voltar" 
        Clicked="Button_Clicked" 
        BackgroundColor="#7986CB" 
        TextColor="White" 
        CornerRadius="8"
        FontAttributes="Bold"
        Margin="0, 10, 0, 0"/>

    </VerticalStackLayout>
    
</ContentPage>