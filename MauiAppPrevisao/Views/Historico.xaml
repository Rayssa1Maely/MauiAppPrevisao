<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiAppPrevisao.Views.Historico"
             Title="HistÃ³rico de Consultas"
             BackgroundColor="#E8EAF6">

    <VerticalStackLayout Padding="20" Spacing="15">

        <Frame BackgroundColor="White" Padding="15" CornerRadius="8" HasShadow="True">
            <VerticalStackLayout Spacing="10">
                <Label Text="Filtrar por Intervalo de Datas" FontSize="18" FontAttributes="Bold" TextColor="#3F51B5"/>

                <Grid ColumnDefinitions="*, *, Auto" ColumnSpacing="10">

                    <DatePicker Grid.Column="0" x:Name="StartDatePicker" Format="dd/MM/yyyy" />
                    <DatePicker Grid.Column="1" x:Name="EndDatePicker" Format="dd/MM/yyyy" />

                    <Button Grid.Column="2" Text="Filtrar" Clicked="OnFilterClicked" 
                            BackgroundColor="#5C6BC0" TextColor="White" CornerRadius="5" />
                </Grid>
            </VerticalStackLayout>
        </Frame>

        <Label Text="Consultas Realizadas:" FontSize="16" FontAttributes="Bold" TextColor="#333" Margin="0, 10, 0, 0"/>

        <ListView x:Name="HistoryListView" HasUnevenRows="True" SelectionMode="None" VerticalOptions="FillAndExpand">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <ViewCell>
                        <Frame Margin="5" Padding="10" CornerRadius="5" BackgroundColor="#F5F5F5">
                            <VerticalStackLayout>
                                <Label Text="{Binding Cidade}" FontSize="18" FontAttributes="Bold" TextColor="#1976D2" />
                                <Label Text="{Binding DataConsulta, StringFormat='Data: {0:dd/MM/yyyy HH:mm}'}" 
                                       FontSize="14" TextColor="#666" />
                            </VerticalStackLayout>
                        </Frame>
                    </ViewCell>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

    </VerticalStackLayout>
</ContentPage>